# todo-backend

## Overwiev

###### General
It's my todo application backend, written in Laravel. It supports 5 types of operation: CRUD and Toggle. Reading all list connected to particular user, creating new Todo item, update and delete and toggling *DONE* | *UNDONE*.

###### Tech Stack
It uses:
- PHP 7.4
- Laravel 5
- Eloquent
- [My own Auth Server](https://github.com/Massfice/meet-your-elf-auth-diploma)
- Composer

## Solution

###### Protection
It's standard REST API server. It has custom *User* class that implements *Authenticatable* interface. It also has custom user provider. Each endpoint requires Bearer token that is generated by [meet-your-elf-auth](https://github.com/Massfice/meet-your-elf-auth-diploma) server.  It uses custom middleware located in *app/Http/Middleware/ValidateAction.php*. Each request is validated against mentioned above auth server.

###### Model and Resources
It uses Eloquent data model and Todo Resource and collection. It reads, stores and modifies only *todo*. It doesn't store user data. When creating *todo*, it sets *owner_id* based on username that is retrieve from auth server after token exchange. It creates *user id* by hashing username. It uses the same id to check if particular *todo* belongs to particular user and allows action or not.

###### Endpoint:
This server has two endpoints:
- **{host}/api/todo:**
    - **GET:** Get all *todos* (todo list) associated with particular user.
    - **POST:** Create new *todo* item. It requires *checked* (bool) value and *text* value (string) in json format. Request is validated to check if could be processed or not (if can, it is processed - 201 created, if not - 422 - Unsupported Entity is thrown).
- **{host}/api/todo/{todo_id}:**
    - **DELETE:** Delete particular *todo* item if belongs to particular user (validated by token). Id of *todo* is required.
    - **PUT:** Update *todo* item if belongs to particular user. It requires tha same json object as *POST* method and additionaly id of *todo*.
    - **PATCH:** This method updates *todo* by switching checked (if it's true, it become false and *vice versa*). This also has user validation implemented.

POST, DELETE, PUT and PATCH endpoints return new or updated *todo* object, that allows frontend simple modify state, instead of performing additional request for fetching all list again.

###### Other
This server uses custom classes, exception and interfaces (see: *Custom* and *Authentication* directories in *app* folder). It has handled errors by *app/Exceptions/Handler.php*. You can customize this application, using e.g. .env file (it contains database config and special variable that points on auth server - *AUTH_ENDPOINT*).

###### Cors Config
It's configured to support local development.
- Headers:
    - Origin
    - Content-Type
    - Authorization
- Methods:
    - GET
    - POST
    - PUT
    - DELETE
    - OPTIONS
    - PATCH
- Origins:
    - http://localhost:3000

## End Words
I'm Adrian Larysz. To run this project locally:
- `git clone https://github.com/Massfice/todo-backend`
- `composer install`
- `php artisan migrate`
- `php artisan serve`
That's all. Thank you.